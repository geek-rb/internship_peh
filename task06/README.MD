# Task 6: Logging&Monitoring. Big Brother.
> Мониторинг: Город засыпает просыпается ....
---

(1) Zabbix:
[DONE]1. Установить на сервер - сконфигурировать веб и базу 
```
сделано 
```
---
[DONE]2. Поставить на подготовленные ранее сервера или виртуалки заббикс агенты - (EXTRA: сделать это ансиблом)
```
git: 6-1-2_inst_agent.yml
```
<details>
<summary>Workflow SCREEN</summary>
<img src="./.img/task6-1-2.png" />
</details>

---
3. Сделать несколько своих дашбородов, куда вывести данные со своих триггеров (например мониторить размер базы данных из предыдущего задания и включать алерт при любом изменении ее размера - можно спровоцировать вручную )
---
4. Active check vs passive check - применить у себя оба вида - продемонстрировать.
---
5. Сделать безагентный чек любого ресурса (ICMP ping)
---
6. Спровоцировать алерт - и создать Maintenance инструкцию 
---
7. Нарисовать дашборд с ключевыми узлами инфраструктуры и мониторингом как и хостов так и установленного на них софта
---
---

(2) ELK: 
Никто не забыт и ничто не забыто.

[DONE]1. Установить и настроить ELK
```
screen 
```
<details>
<summary>Workflow SCREEN</summary>
<img src="./.img/task6-2-1.png" />
</details>

---


[DONE]2. Организовать сбор логов из докера в ELK и получать данные от запущенных контейнеров

```
пример получаемых данных

@timestamp:    Feb 18, 2021 @ 16:42:46.355
version:    1.1
message:    Running from: /usr/share/jenkins/jenkins.war
created:    Feb 18, 2021 @ 16:42:45.089
container_name:    myjenkins
level:    6
type:    gelf
image_id:    sha256:c85b3dde00f00db841947db97a49004b2c1ec7ce71011a83f8907e39b93188e1
image_name:    666pehid666/jenks01
command:    /sbin/tini -- /usr/local/bin/jenkins.sh
container_id:    2303b02c340f481c674b868da95ab09b0a4242ab5bb6502f0da3979b03d8410e
tag:    2303b02c340f
host:    ubuntu
source_host:    192.168.100.50
_id:    b7RgtXcBP3j2KDLq9VTY
_type:    _doc
_index:    %{[gelf]}-2021.02.18

screen
```

<details>
<summary>Workflow SCREEN</summary>
<img src="./.img/task6-2-2.png" />
</details>
```

---
3. Настроить свои дашборды в ELK
```
В растерянности, что надо дашбордить, а то что сделал не несет практического смысл.
А то что навскидку хотелось бы - сколько всего контейнеров запущено, топ5 по ресурсам, но сколько это займет времени - неизвестно
```
---
[DONE]4. EXTRA: Настроить фильтры на стороне Logstash (из поля message получить отдельные поля docker_container и docker_image)
```
случайно сделано)
```
---
5. Настроить мониторинг в ELK - получать метрики от ваших запущенных контейнеров
```
не сделал достаточно информативную выгрузку с докера

```
---
6. Посмотреть возможности и настройки

 (3) Grafana:
```
не делал, не успею, да и хотелось бы сначала сделать нормальный выход логов как с хоста докера, так и конкретных контейнеров, а потом уже оперировать этими данными и рисовать розовых пони
```
1. Установить Grafana интегрировать с установленным ELK
2. Настроить Дашборды
3. Посмотреть возможности и настройки